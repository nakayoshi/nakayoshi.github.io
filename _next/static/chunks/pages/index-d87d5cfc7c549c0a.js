(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3833:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var r=n(8767),i=n(29),s=n(7794),o=n.n(s),a=n(2777),u=n(2262),c=n(9499),p="Self",d="Others",l="Meta",h="TextMessage",f="OgpMessage",x="MetaMessage",g="OgpLarge",y=function(e){return{type:h,text:e.text,userType:e.userType,links:e.links}},m=function(e){return{type:x,text:e,userType:l}},w=function(e,t){return{type:f,userType:e,ogp:t}},k=function(){function e(){(0,a.Z)(this,e),(0,c.Z)(this,"story",void 0),this.story=[]}return(0,u.Z)(e,[{key:"know",value:function(e){this.story.push(e)}},{key:"tell",value:function(){var e=(0,i.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,800)}));case 2:if(this.checkIndex(t)){e.next=4;break}throw new Error("no index");case 4:if(n=this.story[t],this.hasNext(t)){e.next=7;break}return e.abrupt("return",{message:n,nextIndex:void 0});case 7:return e.abrupt("return",{message:n,nextIndex:t+1});case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkIndex",value:function(e){return this.story.length>e}},{key:"hasNext",value:function(e){return this.story.length-1>e}}],[{key:"fromPrepared",value:function(){var t=new e;return t.know(m("nakayoshi.dance\u304c\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3057\u305f")),t.know(m("\u8a2a\u554f\u8005\u304c\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3057\u305f")),t.know(y({text:"nakayoshi.dance\u3078\u3088\u3046\u3053\u305d",userType:d})),t.know(y({text:"\u3048\u3001\u3060\u308c\uff1f",userType:p})),t.know(y({text:"\u79c1\u305f\u3061\u306f\u79c1\u305f\u3061\u306e\u3053\u3068\u3092\u56e3\u4f53\u3067\u3042\u308b\u3068\u306f\u8003\u3048\u3066\u3044\u307e\u305b\u3093",userType:d})),t.know(y({text:"\u3042\u304f\u307e\u3067\u500b\u4eba\u9593\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306a\u306e\u3067\u3059",userType:d})),t.know(y({text:"\u305d\u308c\u3092\u56e3\u4f53\u3063\u3066\u3044\u3046\u3093\u3058\u3083\u306a\u3044\u306e\uff1f",userType:p})),t.know(y({text:"\u3046\u308b\u3055\u3044\u3000\u3070\u304b",userType:d})),t.know(y({text:"\u3082\u3057\u8208\u5473\u304c\u3042\u308c\u3070Discord\u306e\u30ea\u30f3\u30af\u3092\u5dee\u3057\u4e0a\u3052\u307e\u3059\u304c\uff1f",userType:d})),t.know(y({text:"\u3048\u3047...\uff1f\u5225\u306b\u3044\u3089\u306a\u3044\u304b\u306a\u3002",userType:p})),t.know(y({text:"https://github.com/nakayoshi/",userType:d,links:[{linkText:"https://github.com/nakayoshi/",url:new URL("https://github.com/nakayoshi/")}]})),t.know(w(d,{type:g,title:"\u306a\u304b\u3088\u3057",description:"Discord\u30b5\u30fc\u30d0\u30fc\u300c\u306a\u304b\u3088\u3057\u300d. \u306a\u304b...",imagePath:"/nakayoshi.jpg",url:"https://github.com/nakayoshi/"})),t.know(y({text:"GitHub\u3084\u3093\u3051",userType:p})),t.know(y({text:"\u79c1\u305f\u3061\u306b\u3064\u3044\u3066\u3082\u3063\u3068\u77e5\u308a\u305f\u3044\u306e\u306a\u3089\n/about\n\u307e\u305f\u8a71\u3057\u305f\u3044\u6642\u306b\u306f\n/contact\n\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3066\u304f\u3060\u3055\u3044\u3002\u3067\u306f\u3002",userType:d})),t.know(w(d,{type:g,title:"About",description:"\u79c1\u305f\u3061\u306e\u3053\u3068\u3092\u77e5\u308b",imagePath:"/nakayoshi.jpg",url:"/about"})),t.know(w(d,{type:g,title:"Contact",description:"\u8a71\u3057\u305f\u3044\uff1f",imagePath:"/nakayoshi.jpg",url:"/contact"})),t.know(m("nakayoshi.dance\u304c\u30ed\u30b0\u30a2\u30a6\u30c8\u3057\u307e\u3057\u305f")),t.know(y({text:"\u3044\u306a\u304f\u306a\u3063\u3061\u3083\u3063\u305f\u30fb\u30fb\u30fb",userType:p})),t}}]),e}(),v=k.fromPrepared(),_=function(){var e=(0,i.Z)(o().mark((function e(t){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.tell(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),b=n(2125),j=n(7294),T=n(1664),P=n.n(T),C=n(5893),M=b.ZP.div.withConfig({displayName:"ChatOgpMessage__Wrapper",componentId:"sc-13e4r5l-0"})(["display:flex;flex-direction:column;width:100%;height:20%;border-radius:8px;"]),N=b.ZP.div.withConfig({displayName:"ChatOgpMessage__OgpImageContainer",componentId:"sc-13e4r5l-1"})(["position:relative;width:100%;height:140px;"]),I=b.ZP.img.withConfig({displayName:"ChatOgpMessage__OgpImage",componentId:"sc-13e4r5l-2"})(["border-radius:8px 8px 0px 0px;object-fit:cover;height:100%;width:100%;"]),Z=b.ZP.div.withConfig({displayName:"ChatOgpMessage__OgpText",componentId:"sc-13e4r5l-3"})(["width:100%;display:flex;flex-direction:column;padding:10px;& :only-child{padding-left:5px;}& > h4{text-decoration:none;font-size:14px;font-weight:normal;}& > span{font-size:12px;}& > a{color:#7f93c4;font-size:12px;}"]),O=function(e){var t=e.ogp;return(0,C.jsxs)(M,{children:[(0,C.jsx)(N,{children:(0,C.jsx)(I,{src:t.imagePath,alt:t.title})}),(0,C.jsxs)(Z,{children:[(0,C.jsx)("h4",{children:t.title}),(0,C.jsx)("span",{children:t.description}),(0,C.jsx)("a",{children:t.url})]})]})},z=b.ZP.li.withConfig({displayName:"ChatMessage__MessageWrapper",componentId:"sc-581pa3-0"})(["display:flex;align-items:center;width:100%;justify-content:",";& > div{width:",";padding:",";background-color:",";}"],(function(e){return function(e){switch(e){case p:return"flex-end";case d:return"flex-start";case l:return"center";default:return"flex-end"}}(e.userType)}),(function(e){return e.messageType===f?"60%":"auto"}),(function(e){return function(e){switch(e){case h:return"10px";case f:return"0";case x:return"2px 20px";default:return 10}}(e.messageType)}),(function(e){return function(e){switch(e){case p:return"#93df84";case d:return"white";case l:return"rgba(229, 229, 229, 0.5)";default:return"#93df84"}}(e.userType)})),E=b.ZP.div.withConfig({displayName:"ChatMessage__MessageBaloon",componentId:"sc-581pa3-1"})(["border-radius:8px;margin:10px 20px;max-width:60%;font-size:14px;& > span{color:rgba(0,0,0,0.9);}a{color:#7f93c4;}"]),F=b.ZP.div.withConfig({displayName:"ChatMessage__MetaMessageBaloon",componentId:"sc-581pa3-2"})(["margin:10px;border-radius:20px;font-size:12px;& > span{color:rgba(255,255,255,0.8);}"]),W=function(e,t){var n=e.split(t.linkText);return n.splice(1,0,(0,C.jsx)(P(),{href:t.url,passHref:!0,children:(0,C.jsx)("a",{children:t.linkText})})),n.map((function(e,t){return(0,C.jsx)("span",{children:e},t)}))},B=function(e){var t=e.links,n=e.text;if(!n)return"";if(!t)return n;return function e(n,r){var i=function(e,t){return e.map((function(e){return console.log(W(e,t)),W(e,t)}))}(r,t[n]).flat(),s=n+1;return t.length<s?e(s,i):i}(0,[n])},L=function(e){var t=e.message,n=e.onMounted,r=e.isLast;(0,j.useEffect)((function(){r||n()}),[n,r]);var i=(0,j.useMemo)((function(){return(0,C.jsx)("span",{children:B(t)})}),[t]);if(!t)return(0,C.jsx)("div",{});var s=t.userType,o=t.type,a=t.ogp;return(0,C.jsx)(z,{userType:s,messageType:o,children:s===l?(0,C.jsx)(F,{children:i}):a?(0,C.jsx)(E,{children:(0,C.jsx)(O,{ogp:a})}):(0,C.jsx)(E,{children:i})})},S=b.ZP.ul.withConfig({displayName:"ChatView__Wrapper",componentId:"sc-ak1ofz-0"})(["background-color:#292841;width:100%;padding:10px 0;overflow-y:scroll;"]),H=function(){var e=(0,j.useRef)(null),t=(0,r.useInfiniteQuery)("chats",(function(e){var t=e.pageParam;return _(void 0===t?0:t)}),{getNextPageParam:function(e){return e.nextIndex||void 0}}),n=t.data,i=t.fetchNextPage,s=t.hasNextPage;return(0,j.useEffect)((function(){var t;e.current&&e.current.scrollTo({top:null===(t=e.current)||void 0===t?void 0:t.scrollHeight,behavior:"smooth"})}),[n]),(0,C.jsx)(S,{ref:e,children:null===n||void 0===n?void 0:n.pages.map((function(e,t){return(0,C.jsx)(L,{message:e.message,onMounted:function(){return i({cancelRefetch:!1})},isLast:!s},t)}))})},R=n(1436),X=n(2814),D=b.ZP.div.withConfig({displayName:"MessageField__Wrapper",componentId:"sc-11vpmh1-0"})(["display:flex;justify-content:center;background-color:#fff;padding:10px;align-items:center;height:54px;box-shadow:0 2px 5px black;"]),G=b.ZP.input.withConfig({displayName:"MessageField__InputField",componentId:"sc-11vpmh1-1"})(["border:2px solid #e5e5e5;border-radius:20px;flex-grow:1;margin-right:10px;height:30px;padding-left:10px;"]),A=b.ZP.div.withConfig({displayName:"MessageField__SendButtonWrapper",componentId:"sc-11vpmh1-2"})([""]),Q=b.ZP.button.withConfig({displayName:"MessageField__SendButton",componentId:"sc-11vpmh1-3"})(["background-color:#7f93c4;border-radius:20px;display:flex;padding:10px 15px;justify-content:center;align-items:center;"]),U=function(){return(0,C.jsx)(X.G,{icon:R.XCy})},V=b.ZP.span.withConfig({displayName:"MessageField__SendButtonLabel",componentId:"sc-11vpmh1-4"})(["color:#fff;font-size:16px;display:flex;justify-content:center;align-items:center;height:20px;width:20px;"]),q=function(){return(0,C.jsxs)(D,{children:[(0,C.jsx)(G,{disabled:!0}),(0,C.jsx)(A,{children:(0,C.jsx)(Q,{children:(0,C.jsx)(V,{children:(0,C.jsx)(U,{})})})})]})},J=b.ZP.div.withConfig({displayName:"pages__Wrapper",componentId:"sc-zkkk7x-0"})(["display:flex;flex-direction:column;height:auto;width:auto;background-color:#292841;width:100%;height:100%;& > ul:first-child{position:relative;top:0;padding-bottom:74px;}& > div:last-child{position:fixed;right:0;bottom:0;left:0;}"]),K=function(){return(0,C.jsxs)(J,{children:[(0,C.jsx)(H,{}),(0,C.jsx)(q,{})]})}},8312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(3833)}])}},function(e){e.O(0,[523,324,774,888,179],(function(){return t=8312,e(e.s=t);var t}));var t=e.O();_N_E=t}]);