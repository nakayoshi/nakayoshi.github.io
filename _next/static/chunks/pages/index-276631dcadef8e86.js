(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{4389:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return S}});var r=t(8767),i=t(29),s=t(7794),a=t.n(s),o=t(2777),u=t(2262),c=t(9499),d="Self",p="Others",f="Meta",l=function(e){return{type:"TextMessage",text:e.text,userType:e.userType}},x=function(e){return{type:"MetaMessage",text:e,userType:f}},h=function(){function e(){(0,o.Z)(this,e),(0,c.Z)(this,"story",void 0),this.story=[]}return(0,u.Z)(e,[{key:"know",value:function(e){this.story.push(e)}},{key:"tell",value:function(){var e=(0,i.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return setTimeout(e,800)}));case 2:if(this.checkIndex(n)){e.next=4;break}return e.abrupt("return",{message:void 0,nextIndex:void 0});case 4:if(t=this.story[n],this.hasNext(n)){e.next=7;break}return e.abrupt("return",{message:t,nextIndex:void 0});case 7:return e.abrupt("return",{message:t,nextIndex:n+1});case 8:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()},{key:"checkIndex",value:function(e){return this.story.length>e}},{key:"hasNext",value:function(e){return this.story.length-1>e}}],[{key:"fromPrepared",value:function(){var n=new e;return n.know(x("nakayoshi.dance\u304c\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3057\u305f")),n.know(x("\u8a2a\u554f\u8005\u304c\u30ed\u30b0\u30a4\u30f3\u3057\u307e\u3057\u305f")),n.know(l({text:"nakayoshi.dance\u3078\u3088\u3046\u3053\u305d",userType:p})),n.know(l({text:"\u3048\u3001\u3060\u308c\uff1f",userType:d})),n.know(l({text:"\u79c1\u305f\u3061\u306f\u79c1\u305f\u3061\u306e\u3053\u3068\u3092\u56e3\u4f53\u3067\u3042\u308b\u3068\u306f\u8003\u3048\u3066\u3044\u307e\u305b\u3093",userType:p})),n.know(l({text:"\u3042\u304f\u307e\u3067\u500b\u4eba\u9593\u306e\u30cd\u30c3\u30c8\u30ef\u30fc\u30af\u306a\u306e\u3067\u3059",userType:p})),n.know(l({text:"\u305d\u308c\u3092\u56e3\u4f53\u3063\u3066\u3044\u3046\u3093\u3058\u3083\u306a\u3044\u306e\uff1f",userType:d})),n.know(l({text:"\u3046\u308b\u3055\u3044\u3000\u3070\u304b",userType:p})),n.know(l({text:"\u3082\u3057\u8208\u5473\u304c\u3042\u308c\u3070Discord\u306e\u30ea\u30f3\u30af\u3092\u5dee\u3057\u4e0a\u3052\u307e\u3059\u304c\uff1f",userType:p})),n}}]),e}(),g=h.fromPrepared(),y=function(){var e=(0,i.Z)(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.tell(n);case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=t(2125),w=t(7294),v=t(5893),k=m.ZP.li.withConfig({displayName:"ChatMessage__MessageWrapper",componentId:"sc-581pa3-0"})(["display:flex;align-items:center;width:100%;justify-content:",";& > div{background-color:",";}"],(function(e){return function(e){switch(e){case d:return"flex-end";case p:return"flex-start";case f:return"center";default:return"flex-end"}}(e.userType)}),(function(e){return function(e){switch(e){case d:return"#93df84";case p:return"white";case f:return"rgba(229, 229, 229, 0.5)";default:return"#93df84"}}(e.userType)})),_=m.ZP.div.withConfig({displayName:"ChatMessage__MessageBaloon",componentId:"sc-581pa3-1"})(["padding:10px;border-radius:8px;margin:10px 20px;max-width:60%;font-size:14px;& > span{color:rgba(0,0,0,0.9);}"]),b=m.ZP.div.withConfig({displayName:"ChatMessage__MetaMessageBaloon",componentId:"sc-581pa3-2"})(["padding:2px 20px;margin:10px;border-radius:20px;font-size:12px;& > span{color:rgba(255,255,255,0.8);}"]),j=function(e){var n=e.message,t=e.onMounted,r=e.isLast;if((0,w.useEffect)((function(){r||t()}),[t,r]),!n)return(0,v.jsx)("div",{});var i=n.userType;return(0,v.jsx)(k,{userType:i,children:i===f?(0,v.jsx)(b,{children:(0,v.jsx)("span",{children:n.text})}):(0,v.jsx)(_,{children:(0,v.jsx)("span",{children:n.text})})})},N=m.ZP.ul.withConfig({displayName:"ChatView__Wrapper",componentId:"sc-ak1ofz-0"})(["background-color:#292841;width:100%;padding:10px 0;overflow-y:scroll;"]),P=function(){var e=(0,r.useInfiniteQuery)("chats",(function(e){var n=e.pageParam;return y(void 0===n?0:n)}),{getNextPageParam:function(e){return e.nextIndex||void 0}}),n=e.data,t=e.fetchNextPage,i=e.hasNextPage;return(0,v.jsx)(N,{children:null===n||void 0===n?void 0:n.pages.map((function(e,n){return(0,v.jsx)(j,{message:e.message,onMounted:function(){return t({cancelRefetch:!1})},isLast:!i},n)}))})},I=t(1436),M=t(2814),T=m.ZP.div.withConfig({displayName:"MessageField__Wrapper",componentId:"sc-11vpmh1-0"})(["display:flex;justify-content:center;background-color:#fff;padding:10px;align-items:center;height:54px;box-shadow:0 2px 5px black;"]),C=m.ZP.input.withConfig({displayName:"MessageField__InputField",componentId:"sc-11vpmh1-1"})(["border:2px solid #e5e5e5;border-radius:20px;flex-grow:1;margin-right:10px;height:30px;padding-left:10px;"]),Z=m.ZP.div.withConfig({displayName:"MessageField__SendButtonWrapper",componentId:"sc-11vpmh1-2"})([""]),E=m.ZP.button.withConfig({displayName:"MessageField__SendButton",componentId:"sc-11vpmh1-3"})(["background-color:#7f93c4;border-radius:20px;display:flex;padding:10px 15px;justify-content:center;align-items:center;"]),F=function(){return(0,v.jsx)(M.G,{icon:I.XCy})},z=m.ZP.span.withConfig({displayName:"MessageField__SendButtonLabel",componentId:"sc-11vpmh1-4"})(["color:#fff;font-size:16px;display:flex;justify-content:center;align-items:center;height:20px;width:20px;"]),B=function(){return(0,v.jsxs)(T,{children:[(0,v.jsx)(C,{disabled:!0}),(0,v.jsx)(Z,{children:(0,v.jsx)(E,{children:(0,v.jsx)(z,{children:(0,v.jsx)(F,{})})})})]})},W=m.ZP.div.withConfig({displayName:"pages__Wrapper",componentId:"sc-zkkk7x-0"})(["display:flex;flex-direction:column;height:auto;width:auto;background-color:#292841;width:100%;height:100%;& > div:first-child{position:relative;top:0;padding-bottom:74px;}& > div:last-child{position:fixed;right:0;bottom:0;left:0;}"]),S=function(){return(0,v.jsxs)(W,{children:[(0,v.jsx)(P,{}),(0,v.jsx)(B,{})]})}},8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(4389)}])}},function(e){e.O(0,[523,142,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);